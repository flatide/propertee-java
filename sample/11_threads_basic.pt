// 11 - Threads (Basic)
// Functions run concurrently inside a "multi" block using "thread".
// They are pure: can read globals (snapshot), cannot write globals.

// Define functions normally with the "function" keyword
function worker(name, steps) do
    i = 0
    loop i < steps infinite do
        PRINT(name + " step " + TO_STRING(i + 1))
        i = i + 1
    end
    return name + " done"
end

// Run functions in parallel with "multi ... end"
// Use "thread funcCall() -> varName" to capture each function's return value
multi
    thread worker("Alpha", 3) -> resultA
    thread worker("Beta", 3) -> resultB
end

// Results are available after the multi block
PRINT("---")
PRINT("Alpha returned:", resultA.value)
PRINT("Beta returned:", resultB.value)
