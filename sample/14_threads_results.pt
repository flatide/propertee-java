// 14 - Thread Results
// Functions in multi blocks can return any value: numbers, strings, objects, arrays.
// Results collected into a single object via multi result do ... end
// Each entry is {status, ok, value} â€” check status/ok for success or error.

function compute(n) do
    res = n * n + n
    PRINT("compute(" + TO_STRING(n) + ") = " + TO_STRING(res))
    return res
end

function build_report(id) do
    report = {
        id: id,
        value: id * 100,
        status: "complete"
    }
    PRINT("Built report #" + TO_STRING(id))
    return report
end

multi result do
    thread val1: compute(5)
    thread val2: compute(3)
    thread report: build_report(42)
end

PRINT("---")
PRINT("val1:", result.val1.value)
PRINT("val2:", result.val2.value)
PRINT("report.id:", result.report.value.id)
PRINT("report.value:", result.report.value.value)
PRINT("report.status:", result.report.value.status)
PRINT("Sum of computations:", result.val1.value + result.val2.value)
