// 13 - Monitor Blocks
// A monitor runs periodically while threads are executing.
// Syntax: monitor <interval_ms> <body>

function counter(name, target) do
    i = 0
    loop i < target infinite do
        i = i + 1
    end
    PRINT(name + " counted to " + TO_STRING(target))
    return i
end

multi
    thread counter("A", 20) -> rA
    thread counter("B", 15) -> rB
monitor 50
    PRINT("[monitor] threads still running...")
end

PRINT("---")
PRINT("A:", rA.value)
PRINT("B:", rB.value)
