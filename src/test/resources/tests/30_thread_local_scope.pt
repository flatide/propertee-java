// Test: Thread purity - assignments in thread create local vars, not global writes.
// Inside a thread function, x = 999 creates a local variable.
// The global 'x' remains unchanged after the multi block.
x = 10

thread localWriter() do
    x = 999
    PRINT("thread x=" + TO_STRING(x))
    return x
end

multi
    localWriter() -> r
end

PRINT("global x=" + TO_STRING(x))
PRINT("result=" + TO_STRING(r.value))
